{% extends "admin/base_site.html" %}
{% block content %}
<h1>Reporting</h1>
<div class="row mb-4">
  <div class="col-md-4"><div class="card p-3">Ventas totales: $ {{ kpi_total|floatformat:2 }}</div></div>
  <div class="col-md-4"><div class="card p-3">Órdenes aprobadas: {{ kpi_aprobadas }}</div></div>
  <div class="col-md-4"><div class="card p-3">Pendientes: {{ kpi_pendientes }}</div></div>
</div>
<canvas id="chart" height="100"></canvas>
<p class="mt-3"><a class="button" href="{% url 'admin:report_export_csv' %}">Descargar CSV</a></p>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
const ctx = document.getElementById('chart').getContext('2d');
new Chart(ctx, {
  type: 'line',
  data: { labels: {{ labels|safe }}, datasets:[{ label:'Ventas aprobadas (30 días)', data: {{ data|safe }} }] }
});
</script>
{% endblock %}
